<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Phishing-Demo (Training)</title>
  <style>
    :root { --brand:#d40000; --bg:#f6f7f9; --text:#111; --muted:#666; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--text); }
    .banner{
      position: sticky; top:0; z-index:10;
      background:#111; color:#fff; padding:12px 14px; text-align:center; font-weight:900;
      letter-spacing:.3px;
    }
    .banner span{ color:#ffdd55; }
    .wrap{ max-width: 860px; margin: 0 auto; padding: 18px 14px 40px; }
    .card{
      background:#fff; border:1px solid #e5e7eb; border-radius:16px; padding:18px;
      box-shadow: 0 8px 26px rgba(0,0,0,.06);
    }
    h1{ margin:0 0 6px; font-size:24px; }
    p{ margin:0 0 12px; color:var(--muted); line-height:1.45; }
    .alert{
      margin:12px 0 16px;
      background:#fff5f5; border:1px solid #ffd0d0; border-left:6px solid var(--brand);
      border-radius:12px; padding:12px;
      color:#7a1212; font-weight:800;
    }
    label{ display:block; font-weight:800; margin:10px 0 6px; }
    input{
      width:100%; box-sizing:border-box; padding:12px 12px;
      border:1px solid #d1d5db; border-radius:12px; font-size:16px; outline:none;
    }
    input:focus{ border-color:#9ca3af; box-shadow: 0 0 0 3px rgba(212,0,0,.12); }
    .row{ display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap; margin-top:14px; }
    button{
      background:var(--brand); color:#fff; border:none; border-radius:12px;
      padding:12px 14px; font-weight:900; cursor:pointer;
    }
    button:active{ transform: translateY(1px); }
    a{ color:var(--brand); font-weight:800; text-decoration:none; }
    a:hover{ text-decoration:underline; }
    .fine{ margin-top:10px; font-size:13px; color:#777; }

    .modal{
      position: fixed; inset: 0; background: rgba(0,0,0,.55);
      display:none; align-items:center; justify-content:center; padding:14px;
    }
    .modal.open{ display:flex; }
    .modal .box{
      width:min(720px, 100%); background:#fff; border:1px solid #e5e7eb;
      border-radius:16px; padding:18px;
      box-shadow: 0 18px 50px rgba(0,0,0,.20);
    }
    .box h2{ margin:0 0 8px; }
    .box ul{ margin:8px 0 0 18px; }
    .box li{ margin:6px 0; }
    .box .row{ justify-content:flex-end; }
  </style>
</head>
<body>
  <div class="banner">⚠️ <span>PHISHING-DEMO (TRAINING)</span> – keine echte Firma, keine echte Anmeldung, keine Datenerfassung</div>

  <div class="wrap">
    <div class="card">
      <h1>Training: Fake-Login erkennen</h1>
      <p>Diese Seite simuliert einen typischen Betrugsablauf. Du kannst testweise etwas eingeben oder auch nichts – der Hinweis erscheint immer.</p>

      <div class="alert">Wichtig: Bitte keine echten Daten eingeben.</div>

      <form id="loginForm">
        <label for="tracking">Sendungsnummer (Demo)</label>
        <input id="tracking" name="tracking" autocomplete="off" placeholder="z. B. ABC123" />

        <label for="user">E-Mail oder Kunden-ID (Demo)</label>
        <input id="user" name="user" autocomplete="off" placeholder="z. B. name@example.de" />

        <div class="row">
          <button type="submit">Anmelden (Demo)</button>
          <a href="#" id="whyLink">Woran erkennt man Phishing?</a>
        </div>

      </form>
    </div>
  </div>

  <div class="modal" id="modal" aria-hidden="true">
    <div class="box" role="dialog" aria-modal="true" aria-labelledby="mTitle">
      <h2 id="mTitle">Aufklärung ✅ Das war eine Phishing-Demo</h2>
      <p>In einem echten Angriff würden hier Daten abgegriffen oder Zahlungen ausgelöst. Achte besonders auf:</p>
      <ul>
        <li>Ungewöhnliche Aufforderungen (Login, Zahlung, „sofort handeln“)</li>
        <li>QR-Codes/Links statt offizieller App</li>
        <li>Verdächtige URL, Tippfehler, fehlende Transparenz</li>
      </ul>
      <div class="row">
        <button id="closeBtn" type="button">Verstanden</button>
      </div>
    </div>
  </div>

  <script>
    // === Counter (empfohlen: countapi.mileshilliard.com) ===
    // Wähle einen eindeutig einzigartigen Key:
    const COUNT_KEY = "nvckvcpqqn-phishing-demo-login-attempts";
    const BASE = "https://countapi.mileshilliard.com/api/v1";

    // Falls du doch countapi.xyz verwendest (wenn erreichbar), dann nimm stattdessen:
    // const COUNT_NS  = "pcarell-demo";
    // const COUNT_KEY = "login_attempts";

    const modal = document.getElementById('modal');
    const form = document.getElementById('loginForm');
    const closeBtn = document.getElementById('closeBtn');
    const whyLink = document.getElementById('whyLink');

    function openModal(e){
      if (e) e.preventDefault();
      modal.classList.add('open');
      modal.setAttribute('aria-hidden', 'false');
    }

    function closeModal(){
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden', 'true');
    }

    async function countLoginAttempt() {
      try {
        // mileshilliard:
        const url = `${BASE}/hit/${encodeURIComponent(COUNT_KEY)}`;

        // countapi.xyz (Alternative):
        // const url = `https://api.countapi.xyz/hit/${encodeURIComponent(COUNT_NS)}/${encodeURIComponent(COUNT_KEY)}`;

        await fetch(url, { cache: "no-store" });
      } catch (e) {
        console.warn("Counter API nicht erreichbar", e);
      }
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const tracking = document.getElementById('tracking').value.trim();
      const user = document.getElementById('user').value.trim();

      // ✅ Modal IMMER anzeigen
      openModal();

      // ✅ Nur zählen, wenn mindestens ein Feld gefüllt ist
      if (tracking !== "" || user !== "") {
        await countLoginAttempt();
      }

      // Optional: Felder leeren (damit nichts „stehen bleibt“)
      document.getElementById('tracking').value = '';
      document.getElementById('user').value = '';
    });

    whyLink.addEventListener('click', openModal);
    closeBtn.addEventListener('click', closeModal);

    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeModal();
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });
  </script>
</body>
</html>
